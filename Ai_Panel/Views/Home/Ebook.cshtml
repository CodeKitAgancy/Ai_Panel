@{
    ViewData["Title"] = $"کتاب {ViewBag.BookName}";
    var bookname = ViewBag.BookName;
}
<script src="~/js/jquery-2.1.4.min.js"></script>
<script src="~/js/jszip.min.js"></script>
@*<script src="https://cdnjs.cloudflare.com/ajax/libs/detect_swipe/2.1.1/jquery.detect_swipe.min.js"></script>*@
@*<script src="https://cdn.jsdelivr.net/npm/epubjs/dist/epub.min.js"></script>*@
<script src="~/js/swipe.min.js"></script>
<script src="~/js/epub.min.js"></script>
<link href="~/css/examples.css" rel="stylesheet" />


<div class="col-md-12 col-lg-12 col-12 mt-5">
    <div id="viewer"></div>
    <div id="prev" class="arrow">‹</div>
    <div id="next" class="arrow">›</div>
</div>

@section Scripts
    {
    <script>
        var host = location.protocol.concat("//").concat(window.location.host);
        var address = host + "/Home/ShowFile?filename=" + "@bookname";
        var book = ePub(address);
        var rendition = book.renderTo("viewer", {
            manager: "continuous",
            flow: "paginated",
            width: "100%",
            height: "100%",
            snap: true

        });

        var displayed = rendition.display();

        displayed.then(function (renderer) {
            // -- do stuff
        });

        // Navigation loaded
        book.loaded.navigation.then(function (toc) {
            // console.log(toc);
        });

        var next = document.getElementById("next");
        next.addEventListener("click", function () {
            rendition.next();
        }, false);

        var prev = document.getElementById("prev");
        prev.addEventListener("click", function () {
            rendition.prev();
        }, false);

        document.addEventListener("keyup", function (e) {

            // Left Key
            if ((e.keyCode || e.which) == 37) {
                rendition.next();
            }

            // Right Key
            if ((e.keyCode || e.which) == 39) {
                rendition.prev();
            }

        }, false);

        $(window).on("swipeleft", function (event) {
            rendition.prev();
        });

        $(window).on("swiperight", function (event) {
            rendition.next();
        });


    </script>

    @*    <script>
        var host = location.protocol.concat("//").concat(window.location.host);
        var address = host + "/Home/ShowFile?filename=" + "@bookname";
        var book = ePub(address);
        var rendition = book.renderTo("viewer");
        //debugger;
        rendition.display();

        var next = document.getElementById("next");
        next.addEventListener("click", function (e) {
            rendition.next();
            e.preventDefault();
        }, false);

        var prev = document.getElementById("prev");
        prev.addEventListener("click", function (e) {
            rendition.prev();
            e.preventDefault();
        }, false);

    </script>*@
    }


